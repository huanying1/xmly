<div class="album-info">
  <div class="main" *ngIf="albumInfo">
    <div class="info">
      <div class="thumbnail">
        <img [src]="albumInfo.cover" [alt]="albumInfo.albumTitle" class="cover">
        <div class="back-cover"></div>
      </div>
      <div class="contents">
        <h1>
          <xm-tag xmColor="#5fa8fc" class="tag">连载</xm-tag>
          <span>{{albumInfo.albumTitle}}</span>
        </h1>
        <div class="record">
          <div class="rate">
            <div class="star-wrap">
              star|star
            </div>
            <span class="score">{{score}}分</span>
          </div>
          <div class="play-count">
            <i xmIcon="headset" class="icon"></i>
            <span>{{albumInfo.playCount | numberFormat}}</span>
          </div>
        </div>
        <div class="metas">
          <xm-tag class="meta" *ngFor="let meta of albumInfo.metas">{{meta.metaDisplayName}}</xm-tag>
        </div>
        <div class="actions">
          <button class="btn xm-btn xm-btn-circle">
            <i xmIcon="play1" class="icon"></i>
            播放全部
          </button>
        </div>
      </div>
    </div>
    <div class="intro">
      <article xmToggleMore="360" (initTrueHeight)="articleHeight = $event" [isFull]="moreState.full" [content]="albumInfo.detailRichIntro" [innerHTML]="albumInfo.detailRichIntro | safeContent"></article>
      <div class="more-arrow" *ngIf="articleHeight > 360" (click)="toggleMore()">
        <div class="blur" [hidden]="moreState.full"></div>
        <span>{{moreState.label}}</span>
        <i [xmIcon]="moreState.icon" class="icon"></i>
      </div>
    </div>
    <div class="playlist">
      <table>
        <thead>
        <tr>
          <th><label xm-checkbox [ngModel]="isCheckedAll()" (ngModelChange)="checkAllChange($event)"></label></th>
          <th class="item-name">曲目</th>
          <th>播放量</th>
          <th>创建时间</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let track of tracks; trackBy:trackByTracks">
          <td class="item-checkbox"><label xm-checkbox [ngModel]="isChecked(track.trackId)" (ngModelChange)="checkedChange($event,track)"></label></td>
          <td class="item-name">
            <span class="prefix number">{{ track.index }}</span>
            <i xmIcon="'play1'" class="prefix icon icon-play"></i>
            <i xmIcon="'pause'" class="prefix icon icon-pause"></i>
            <div class="prefix icon icon-playing"><i></i><i></i><i></i><i></i></div>
            <span>{{ track.title }}</span>
          </td>
          <td>
            <i xmIcon="'headset'" class="icon"></i>
            <span>{{ track.playCount | numberFormat }}</span>
          </td>
          <td>{{ track.createDateFormat }}</td>
        </tr>
        <tr class="last"></tr>
        </tbody>
        <tfoot>
        <tr>
          <th><label xm-checkbox [ngModel]="isCheckedAll()" (ngModelChange)="checkAllChange($event)"></label></th>
          <th class="item-name">
            <button class="xm-btn xm-btn-circle">播放选中歌曲</button>
            <button class="btn-add xm-btn xm-btn-circle">添加到播放列表</button>
          </th>
        </tr>
        </tfoot>
      </table>
      <div class="page-wrap">
        <xm-pagination
          class="page"
          [total]="total"
          [pageNum]="trackParams.pageNum"
          [pageSize]="trackParams.pageSize"
          (changed)="changePage($event)"
        >
        </xm-pagination>
      </div>
    </div>
  </div>

  <div class="side">
    <ng-container *ngIf="anchor">
      <div class="card">
        <div class="card-head">
          <h3>专辑主播</h3>
        </div>
        <div class="card-body">
          <div class="anchor-info">
            <div class="anchor-head">
              <div class="photo">
                <img [src]="anchor.anchorCover" [alt]="anchor.anchorName" />
              </div>
              <span class="name">{{ anchor.anchorName }}</span>
            </div>
            <ul class="anchor-stats">
              <li>曲目：{{ anchor.anchorTracksCount }}</li>
              <li>专辑：{{ anchor.anchorAlbumsCount }}</li>
              <li>粉丝：{{ anchor.anchorFansCount | numberFormat }}</li>
            </ul>
            <p class="anchor-intro">
              简介：
              {{ anchor.personalIntroduction }}
            </p>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-head">
          <h3>TA的专辑</h3>
        </div>
        <div class="card-body">
          <div class="albums">
            <div class="album-item" *ngFor="let item of anchor.anchorAlbumList" [routerLink]="'/album/' + item.albumId">
              <div class="thumbnail">
                <img [src]="item.cover" [alt]="item.albumTitle">
              </div>
              <div class="content">
                <div class="title">{{ item.albumTitle }}</div>
                <span class="count">
               <i xmIcon="headset" class="icon"></i>{{ item.playCount | numberFormat }}
             </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-container>

    <div class="card">
      <div class="card-head">
        <h3>相关推荐</h3>
      </div>
      <div class="card-body">
        <div class="albums">
          <div class="album-item" [routerLink]="'../' +  item.id" *ngFor="let item of relateAlbums">
            <div class="thumbnail">
              <img [src]="'//imagev2.xmcdn.com/' + item.coverPath" [alt]="item.title">
            </div>
            <div class="content">
              <div class="title">{{ item.title }}</div>
              <span class="count">
               <i xmIcon="headset" class="icon"></i>{{ item.playCount | numberFormat }}
             </span>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

